<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>App</title>
</head>

<body class="w-100 text-center py-5">
	<h1>Industry Sentiment Tracker</h1>
	<p class="mb-5">By Aaron Li and Kelly Chang</p>
	<button id="run-analysis" class="btn btn-primary">Run Analysis</button>
	<p id="stats" class="mt-4">
	</p>
	<p id="result" class="mt-4">

	</p>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<style>
		#result {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			grid-gap: 1rem;
			width: calc(100vw - 4rem);
			margin: 0 auto;
		}
	</style>

	<script>
		let data;
		document.addEventListener("DOMContentLoaded", () => {
			fetch("/api/data")
				.then(response => response.json())
				.then(d => {
					data = JSON.parse(JSON.stringify(d))['data']['symbolEntries']['results'].map((e) => {
						return {
							title: e.title,
							description: e.description,
							url: e.url,
						}
					})

					for (const entry of data) {
						document.getElementById("result").innerHTML += `
						<div class="card mt-4">
							<div class="card-body">
								<h5 class="card-title">${entry.title}</h5>
								<h6 class="card-subtitle mb-2 text-muted">${entry.description ?? ""}</h6>
								<a href="${entry.url}" target="_blank" class="card-link"><button class="mt-3 btn btn-outline-primary">Link</button></a>
							</div>
						</div>
						`
					}
				})
		})

		document.getElementById("run-analysis").addEventListener("click", () => {
			document.getElementById("stats").innerHTML = "Sentiment Stats: <br> 1/5: 0 <br> 2/5: 0 <br> 3/5: 0 <br> 4/5: 0 <br> 5/5: 0";
		})
	</script>
</body>